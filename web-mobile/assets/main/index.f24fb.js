window.__require=function e(t,n,o){function i(a,u){if(!n[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!u&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t){var n,o,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function s(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}})();var c,l=[],d=!1,f=-1;function m(){d&&c&&(d=!1,c.length?l=c.concat(l):f=-1,l.length&&p())}function p(){if(!d){var e=u(m);d=!0;for(var t=l.length;t;){for(c=l,l=[];++f<t;)c&&c[f].run();f=-1,t=l.length}c=null,d=!1,s(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||d||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t){t.exports=e("./lib/axios")},{"./lib/axios":4}],3:[function(e,t){"use strict";var n=e("./../utils"),o=e("./../core/settle"),i=e("./../helpers/cookies"),r=e("./../helpers/buildURL"),a=e("../core/buildFullPath"),u=e("./../helpers/parseHeaders"),s=e("./../helpers/isURLSameOrigin"),c=e("../core/createError");t.exports=function(e){return new Promise(function(t,l){var d=e.data,f=e.headers;n.isFormData(d)&&delete f["Content-Type"];var m=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(p+":"+h)}var v=a(e.baseURL,e.url);if(m.open(e.method.toUpperCase(),r(v,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,m.onreadystatechange=function(){if(m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in m?u(m.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m};o(t,l,i),m=null}},m.onabort=function(){m&&(l(c("Request aborted",e,"ECONNABORTED",m)),m=null)},m.onerror=function(){l(c("Network Error",e,null,m)),m=null},m.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(c(t,e,"ECONNABORTED",m)),m=null},n.isStandardBrowserEnv()){var g=(e.withCredentials||s(v))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;g&&(f[e.xsrfHeaderName]=g)}if("setRequestHeader"in m&&n.forEach(f,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:m.setRequestHeader(t,e)}),n.isUndefined(e.withCredentials)||(m.withCredentials=!!e.withCredentials),e.responseType)try{m.responseType=e.responseType}catch(y){if("json"!==e.responseType)throw y}"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){m&&(m.abort(),l(e),m=null)}),d||(d=null),m.send(d)})}},{"../core/buildFullPath":10,"../core/createError":11,"./../core/settle":15,"./../helpers/buildURL":19,"./../helpers/cookies":21,"./../helpers/isURLSameOrigin":24,"./../helpers/parseHeaders":26,"./../utils":28}],4:[function(e,t){"use strict";var n=e("./utils"),o=e("./helpers/bind"),i=e("./core/Axios"),r=e("./core/mergeConfig");function a(e){var t=new i(e),r=o(i.prototype.request,t);return n.extend(r,i.prototype,t),n.extend(r,t),r}var u=a(e("./defaults"));u.Axios=i,u.create=function(e){return a(r(u.defaults,e))},u.Cancel=e("./cancel/Cancel"),u.CancelToken=e("./cancel/CancelToken"),u.isCancel=e("./cancel/isCancel"),u.all=function(e){return Promise.all(e)},u.spread=e("./helpers/spread"),u.isAxiosError=e("./helpers/isAxiosError"),t.exports=u,t.exports.default=u},{"./cancel/Cancel":5,"./cancel/CancelToken":6,"./cancel/isCancel":7,"./core/Axios":8,"./core/mergeConfig":14,"./defaults":17,"./helpers/bind":18,"./helpers/isAxiosError":23,"./helpers/spread":27,"./utils":28}],5:[function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},{}],6:[function(e,t){"use strict";var n=e("./Cancel");function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var o=this;e(function(e){o.reason||(o.reason=new n(e),t(o.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},t.exports=o},{"./Cancel":5}],7:[function(e,t){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],8:[function(e,t){"use strict";var n=e("./../utils"),o=e("../helpers/buildURL"),i=e("./InterceptorManager"),r=e("./dispatchRequest"),a=e("./mergeConfig");function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[r,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}}),n.forEach(["post","put","patch"],function(e){u.prototype[e]=function(t,n,o){return this.request(a(o||{},{method:e,url:t,data:n}))}}),t.exports=u},{"../helpers/buildURL":19,"./../utils":28,"./InterceptorManager":9,"./dispatchRequest":12,"./mergeConfig":14}],9:[function(e,t){"use strict";var n=e("./../utils");function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=o},{"./../utils":28}],10:[function(e,t){"use strict";var n=e("../helpers/isAbsoluteURL"),o=e("../helpers/combineURLs");t.exports=function(e,t){return e&&!n(t)?o(e,t):t}},{"../helpers/combineURLs":20,"../helpers/isAbsoluteURL":22}],11:[function(e,t){"use strict";var n=e("./enhanceError");t.exports=function(e,t,o,i,r){var a=new Error(e);return n(a,t,o,i,r)}},{"./enhanceError":13}],12:[function(e,t){"use strict";var n=e("./../utils"),o=e("./transformData"),i=e("../cancel/isCancel"),r=e("../defaults");function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}t.exports=function(e){return a(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||r.adapter)(e).then(function(t){return a(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(a(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/isCancel":7,"../defaults":17,"./../utils":28,"./transformData":16}],13:[function(e,t){"use strict";t.exports=function(e,t,n,o,i){return e.config=t,n&&(e.code=n),e.request=o,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},{}],14:[function(e,t){"use strict";var n=e("../utils");t.exports=function(e,t){t=t||{};var o={},i=["url","method","data"],r=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function s(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function c(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(o[i]=s(void 0,e[i])):o[i]=s(e[i],t[i])}n.forEach(i,function(e){n.isUndefined(t[e])||(o[e]=s(void 0,t[e]))}),n.forEach(r,c),n.forEach(a,function(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(o[i]=s(void 0,e[i])):o[i]=s(void 0,t[i])}),n.forEach(u,function(n){n in t?o[n]=s(e[n],t[n]):n in e&&(o[n]=s(void 0,e[n]))});var l=i.concat(r).concat(a).concat(u),d=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===l.indexOf(e)});return n.forEach(d,c),o}},{"../utils":28}],15:[function(e,t){"use strict";var n=e("./createError");t.exports=function(e,t,o){var i=o.config.validateStatus;o.status&&i&&!i(o.status)?t(n("Request failed with status code "+o.status,o.config,null,o.request,o)):e(o)}},{"./createError":11}],16:[function(e,t){"use strict";var n=e("./../utils");t.exports=function(e,t,o){return n.forEach(o,function(n){e=n(e,t)}),e}},{"./../utils":28}],17:[function(e,t){(function(n){"use strict";var o=e("./utils"),i=e("./helpers/normalizeHeaderName"),r={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,s={adapter:("undefined"!=typeof XMLHttpRequest?u=e("./adapters/xhr"):void 0!==n&&"[object process]"===Object.prototype.toString.call(n)&&(u=e("./adapters/http")),u),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],function(e){s.headers[e]={}}),o.forEach(["post","put","patch"],function(e){s.headers[e]=o.merge(r)}),t.exports=s}).call(this,e("_process"))},{"./adapters/http":3,"./adapters/xhr":3,"./helpers/normalizeHeaderName":25,"./utils":28,_process:1}],18:[function(e,t){"use strict";t.exports=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}}},{}],19:[function(e,t){"use strict";var n=e("./../utils");function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(n.isURLSearchParams(t))r=t.toString();else{var a=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))}))}),r=a.join("&")}if(r){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},{"./../utils":28}],20:[function(e,t){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],21:[function(e,t){"use strict";var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?{write:function(e,t,o,i,r,a){var u=[];u.push(e+"="+encodeURIComponent(t)),n.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),n.isString(i)&&u.push("path="+i),n.isString(r)&&u.push("domain="+r),!0===a&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":28}],22:[function(e,t){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],23:[function(e,t){"use strict";t.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},{}],24:[function(e,t){"use strict";var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function i(e){var n=e;return t&&(o.setAttribute("href",n),n=o.href),o.setAttribute("href",n),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return e=i(window.location.href),function(t){var o=n.isString(t)?i(t):t;return o.protocol===e.protocol&&o.host===e.host}}():function(){return!0}},{"./../utils":28}],25:[function(e,t){"use strict";var n=e("../utils");t.exports=function(e,t){n.forEach(e,function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])})}},{"../utils":28}],26:[function(e,t){"use strict";var n=e("./../utils"),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,i,r,a={};return e?(n.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=n.trim(e.substr(0,r)).toLowerCase(),i=n.trim(e.substr(r+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([i]):a[t]?a[t]+", "+i:i}}),a):a}},{"./../utils":28}],27:[function(e,t){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},{}],28:[function(e,t){"use strict";var n=e("./helpers/bind"),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function r(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function s(e){return"[object Function]"===o.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}t.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!r(e)&&null!==e.constructor&&!r(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:u,isUndefined:r,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:s,isStream:function(e){return a(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function n(n,o){u(t[o])&&u(n)?t[o]=e(t[o],n):u(n)?t[o]=e({},n):i(n)?t[o]=n.slice():t[o]=n}for(var o=0,r=arguments.length;o<r;o++)c(arguments[o],n);return t},extend:function(e,t,o){return c(t,function(t,i){e[i]=o&&"function"==typeof t?n(t,o):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},{"./helpers/bind":18}],BaseView:[function(e,t,n){"use strict";cc._RF.push(t,"9b015TiFVlD6o/Uc0WG1s2Z","BaseView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Platform/Functions"),i=e("../Platform/GameObjectPool"),r=e("../Reactive/SimpleReactive"),a=cc._decorator.ccclass,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objNameMap=new Map,t}return __extends(t,e),t.prototype.getObjFromMap=function(e){var t=this.objNameMap.get(e);if(t||(t=this.getNode(e),this.objNameMap.set(e,t)),!t)throw new Error("can't find node!");return t},t.prototype.getNode=function(e){for(var t=e.split("."),n=this.node,o=0,i=t;o<i.length;o++){var r=i[o];n=n.getChildByName(r)}return n},t.prototype.onEnable=function(){var e=this;if(!cc.director.getScene().getChildByName("GameObjectPool")){var t=new cc.Node;t.name="GameObjectPool",t.parent=cc.director.getScene(),i.GameObjectPool.Init(t);for(var n=0;n<10;n++)i.GameObjectPool.Preload("Prefab","rankItem")}o.mySetTimeout(function(){e.BindViewModel(),e.BindViewAction()})},t.prototype.start=function(){for(var e=0,t=this.GetViewModel();e<t.length;e++){var n=t[e],o=this.getNode(n.viewName);this.objNameMap.set(n.viewName,o)}},t.prototype.onDisable=function(){this.UnBindViewModel()},t.prototype.BindViewModel=function(){for(var e=this,t=this.GetViewModel(),n=function(t){try{var n=t.state;Array.isArray(n)||(n=[n]);for(var i=0,a=n;i<a.length;i++){var u=a[i];r.On(u.obj,u.key,function(){(0,t.bindFunc)(e.objNameMap.get(t.viewName),n[0].fun())}),(0,t.bindFunc)(o.objNameMap.get(t.viewName),n[0].fun())}}catch(d){var s=t.state;Array.isArray(s)||(s=[s]);for(var c=0,l=s;c<l.length;c++)u=l[c],r.Clear(u.obj);cc.log(d)}},o=this,i=0,a=t;i<a.length;i++)n(a[i])},t.prototype.BindViewAction=function(){for(var e=this.GetViewAction(),t=function(e){try{var t=n.getNode(e.viewName);"click"==e.type&&t.on(cc.Node.EventType.TOUCH_START,function(){e.bindFunc()})}catch(o){cc.log(o)}},n=this,o=0,i=e;o<i.length;o++)t(i[o])},t.prototype.UnBindViewModel=function(){for(var e=0,t=this.GetViewModel();e<t.length;e++){var n=t[e];try{var o=n.state;Array.isArray(o)||(o=[o]);for(var i=0,a=o;i<a.length;i++){var u=a[i];r.Clear(u.obj)}}catch(s){cc.log(s)}}},__decorate([a],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../Platform/Functions":"Functions","../Platform/GameObjectPool":"GameObjectPool","../Reactive/SimpleReactive":"SimpleReactive"}],BindInfo:[function(e,t,n){"use strict";cc._RF.push(t,"c22c9xYyPlEqZS89kKS2u51","BindInfo"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],CocosViewBindings:[function(e,t,n){"use strict";cc._RF.push(t,"95aefkovblBwaUXZtYE3D7y","CocosViewBindings"),Object.defineProperty(n,"__esModule",{value:!0}),n.CocosViewBindings=void 0;var o=function(){function e(){}return e.prototype.bindGray=function(e,t){t?e.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(cc.Material.BUILTIN_NAME.GRAY_SPRITE)):e.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(cc.Material.BUILTIN_NAME.SPRITE))},e.prototype.bindWWWImg=function(e,t){var n=e.getComponent(cc.Sprite);t?cc.assetManager.loadRemote(t,function(e,t){if(e)cc.log(e);else{var o=new cc.SpriteFrame(t);n.spriteFrame=o}}):n.spriteFrame=null},e.prototype.bindText=function(e,t){null!=t&&(e.getComponent(cc.Label).string=t)},e.prototype.bindShow=function(e,t){e.active=t},e.prototype.bindHide=function(e,t){e.active=!t},e.prototype.bindProgress=function(e,t){e.getComponent(cc.ProgressBar).progress=t},e.prototype.bindTween=function(e,t){t&&cc.tween(e).by(t.time,t.opts).start()},e.prototype.bindAnimStop=function(e,t){t&&cc.tween(e).stop()},e.prototype.bindSprite=function(e,t){var n=e.getComponent(cc.Sprite);cc.assetManager.loadBundle(t.bundleName,function(e,o){e?cc.log(e):o.load(t.textureName,cc.SpriteFrame,null,function(e,t){e?cc.log(e):n.spriteFrame=t})})},e.prototype.bindAnimCom=function(e,t){t?(e.active=!0,e.getComponent(cc.Animation).play("cd")):e.active=!1},e}();n.CocosViewBindings=o,cc._RF.pop()},{}],Export:[function(e,t,n){"use strict";cc._RF.push(t,"eec347jn25KS5VqYM3ZKFUM","Export"),Object.defineProperty(n,"__esModule",{value:!0}),n.ViewBindingsImp=void 0;var o=e("../Global"),i=e("./CocosViewBindings"),r=e("./UnityViewBindings");n.ViewBindingsImp=o.G_GameEngine==o.GameEngine.CoCos?new i.CocosViewBindings:new r.UnityViewBindings,cc._RF.pop()},{"../Global":"Global","./CocosViewBindings":"CocosViewBindings","./UnityViewBindings":"UnityViewBindings"}],Functions:[function(e,t,n){"use strict";cc._RF.push(t,"a0390/P40NAfbSgrpDAdmlg","Functions"),Object.defineProperty(n,"__esModule",{value:!0}),n.myUpdate=n.mySetInterval=n.myClearTimeout=n.mySetTimeout=void 0;var o=0,i=function(){function e(){this.updateItems=new Set}return e.prototype.Update=function(e){this.updateItems.forEach(function(t,n,o){var i,r,a;t.elipseTime+=1e3*e,null!=t.delayTime?t.elipseTime>t.delayTime&&(o.delete(t),null===(i=t.callback)||void 0===i||i.call(t)):null!=t.interval?t.elipseTime>=t.interval&&(t.elipseTime=t.elipseTime-t.interval,null===(r=t.callback)||void 0===r||r.call(t)):null===(a=t.callback)||void 0===a||a.call(t)})},e.prototype.Delay=function(e,t){var n={callback:t,elipseTime:0,delayTime:e,generateId:o++};return this.updateItems.add(n),o-1},e.prototype.ScheduleUpdate=function(e,t){var n={callback:e,elipseTime:0,generateId:o++,interval:t};return this.updateItems.add(n),o-1},e.prototype.UnScheduleUpdate=function(e){this.updateItems.forEach(function(t,n,o){t.generateId!=e||o.delete(t)})},e.Get=function(){return this.ins||(this.ins=new e),this.ins},e}();n.mySetTimeout=function(e,t){return void 0===t&&(t=0),i.Get().Delay(t,e)},n.myClearTimeout=function(e){i.Get().UnScheduleUpdate(e)},n.mySetInterval=function(e,t){return i.Get().ScheduleUpdate(e,t)},n.myUpdate=function(e){i.Get().Update(e)},cc._RF.pop()},{}],GameAction:[function(e,t,n){"use strict";cc._RF.push(t,"49792FEyNhGnZ2sFLfsNHfu","GameAction"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameAction=void 0;var o=e("../Math/Math"),i=e("../Network/Msgs"),r=e("../Network/Network"),a=e("../Platform/Functions"),u=e("./GameModel"),s=e("./GlobalEvent"),c=function(){function e(){}return e.stopLoop=function(){-1!=this._loopHandler&&a.myClearTimeout(this._loopHandler);for(var e=0,t=this._timmers;e<t.length;e++){var n=t[e];a.myClearTimeout(n)}this._timmers=[],this._loopHandler=-1},e.StartHitting=function(){var e=this;u.default.mutations.SetState(u.GameState.HITTING),this._loopHandler=a.mySetInterval(function(){e.gameLoop()})},e.saying=function(){this.stopLoop(),0==u.default.model.curStage&&this.sendStartToServer(),u.default.mutations.SetState(u.GameState.SAYING)},e.Start=function(){var e=this;u.default.model.sGetMissionInfo&&(this.stopLoop(),u.default.mutations.SetState(u.GameState.CDING),a.mySetTimeout(function(){e.saying()},3e3))},e.SuperHit=function(e){if(u.default.model.superIng){for(var t=[],n=1;n<=u.default.model.holeNum;n++){var o=u.default.getters.GetMouse(n);o.state!=u.MouseState.None&&o.state!=u.MouseState.Dead&&(u.default.mutations.SetMouseState(n,u.MouseState.Hitted),o.ai.sMole.score>=0&&u.default.mutations.SetScoreWithHistory(u.default.model.score+o.ai.sMole.score),t.push(n))}return e(t),u.default.mutations.SetContinuousScore(0),u.default.mutations.SetIsSupering(!1),this.sendScoreChange(),u.default.mutations.SetAudioEffect(u.AudioEffect.Light),!0}return!1},e.OverByScore=function(){return!!u.default.getters.CanOverGameByScore()&&(this.EndGame(),!0)},e.HitMouse=function(e,t,n,o){var i,r;if(u.default.model.state==u.GameState.HITTING)if(this.SuperHit(o))this.OverByScore();else{var a=u.default.getters.GetMouse(e);u.default.getters.CannotHitState(a.state)||(u.default.mutations.SetMouseState(e,u.MouseState.Hitted),1==(null===(i=a.ai.sMole)||void 0===i?void 0:i.tappable)?(u.default.mutations.SetContinuousScore(u.default.model.continuousScore+a.ai.sMole.score),u.default.mutations.SetScoreWithHistory(u.default.model.score+a.ai.sMole.score),t(),u.default.mutations.SetAudioEffect(u.AudioEffect.Hit)):0==(null===(r=a.ai.sMole)||void 0===r?void 0:r.tappable)&&(u.default.mutations.SetContinuousScore(0),u.default.mutations.SetScoreWithHistory(u.default.model.score+a.ai.sMole.score),n(""+a.ai.sMole.score),u.default.mutations.SetAudioEffect(u.AudioEffect.Error)),this.sendScoreChange(),this.OverByScore()||u.default.model.continuousScore>=u.default.model.superScore&&u.default.mutations.SetIsSupering(!0))}},e.NotHit=function(e){var t=this.SuperHit(e);u.default.mutations.SetContinuousScore(0),t?this.OverByScore():u.default.mutations.SetAudioEffect(u.AudioEffect.Unhit)},e.sendEndToServer=function(){var e;this.sendScoreChange();var t=new i.CMisstionComplete;t.missionNum=u.default.model.appInfo.missionNum,t.missionScore=u.default.model.score,t.totalScore=null===(e=u.default.model.sGetPlayerInfo)||void 0===e?void 0:e.totalScore,t.userId=u.default.model.appInfo.userId,r.Network.RpcSendOnly(t)},e.sendScoreChange=function(){var e,t=new i.CPlayerScoreChange;t.roomId=u.default.model.appInfo.roomId,t.gameStatus=u.default.model.state==u.GameState.HITTING?i.SGameState.ING:i.SGameState.ENDING,t.missionNum=u.default.model.appInfo.missionNum,t.score=u.default.model.score,t.totalScore=null===(e=u.default.model.sGetPlayerInfo)||void 0===e?void 0:e.totalScore,t.userId=u.default.model.appInfo.userId,r.Network.RpcSendOnly(t)},e.sendStartToServer=function(){var e=new i.CMisstionStart;e.missionNum=u.default.model.appInfo.missionNum,e.userId=u.default.model.appInfo.userId,e.roomId=u.default.model.appInfo.roomId,r.Network.RpcSendOnly(e)},e.EndGame=function(){this.stopLoop(),u.default.mutations.SetState(u.GameState.ENDDING),this.sendEndToServer(),this.GetRank()},e.gameLoop=function(){var e=this,t=cc.director.getDeltaTime();this.elipseTime+=t,u.default.model.timeRemain;var n=u.default.model.generateInterval;if(this.elipseTime>=n){this.elipseTime=0,u.default.model.lastTriggerMouse;var i=u.default.getters.GetMousesByFilter(function(e){return e.state==u.MouseState.None});if(0==u.default.model.cachedMoleList.length)return this.stopLoop(),void this._timmers.push(a.mySetTimeout(function(){u.default.model.curStage==u.default.model.sGetMissionInfo.resourceList.length-1?e.EndGame():(u.default.mutations.SetUpNewModelList(u.default.model.sGetMissionInfo.resourceList[u.default.model.curStage+1].moleList),u.default.mutations.SetCurStage(u.default.model.curStage+1),e.saying())},2e3));var r=u.default.model.sGetMissionInfo.levelInfo.maxMoleNumber;if(r&&u.default.getters.GetMousesByFilter(function(e){return e.state!=u.MouseState.None}).length>=r)return;if(i.length>0){var s=o.randomRangeInt(0,i.length);u.default.mutations.SetMouseStateByMouse(i[s],u.MouseState.UpIng)}}},e.GetMisstionInfo=function(e){var t=new i.CGetMissionInfo;return t.missionNum=e,t.roomId=u.default.model.appInfo.roomId,t.userId=u.default.model.appInfo.userId,r.Network.Rpc(t).then(function(e){u.default.mutations.SetMissionInfo(e);for(var t=0,n=e.resourceList[0].moleList;t<n.length;t++){var o=n[t].imgUrl;try{cc.assetManager.loadAny({url:o})}catch(i){}}cc.assetManager.loadAny({url:e.resourceList[0].audioUrl})})},e.GetPlayerInfo=function(){var e=new i.CGetPlayerInfo;e.roomId=u.default.model.appInfo.roomId,e.userId=u.default.model.appInfo.userId,r.Network.Rpc(e).then(function(e){u.default.mutations.SetPlayerInfo(e)})},e.Replay=function(){u.default.mutations.SetContinuousScore(0),u.default.mutations.SetCurStage(0),u.default.mutations.SetScore(0),u.default.mutations.SetUpNewModelList(u.default.model.sGetMissionInfo.resourceList[0].moleList),this.Start()},e.Next=function(){var t;return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return u.default.model.appInfo.missionNum=(null===(t=u.default.model.appInfo)||void 0===t?void 0:t.missionNum)+1,u.default.mutations.SetPlayerInfo(u.default.model.sGetPlayerInfo),[4,e.GetMisstionInfo(u.default.model.appInfo.missionNum)];case 1:return n.sent(),u.default.mutations.SetScore(0),this.Start(),[2]}})})},e.GetRank=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return(e=new i.CGetCurRank).missionNum=u.default.model.appInfo.missionNum,e.roomId=u.default.model.appInfo.roomId,e.userId=u.default.model.appInfo.userId,[4,r.Network.Rpc(e)];case 1:return t=n.sent(),u.default.mutations.SetCurRankInfo(t),[2]}})})},e.GetGameDescription=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return e=new i.CGetGameDescription,[4,r.Network.Rpc(e)];case 1:return t=n.sent(),u.default.mutations.SetGameDescription(t),[2]}})})},e.SelectMisstion=function(e){var t,n;u.default.model.appInfo.missionNum=e,null===(t=s.GlobalEvent.SetGameing)||void 0===t||t.call(s.GlobalEvent,!0),null===(n=s.GlobalEvent.SetSelect)||void 0===n||n.call(s.GlobalEvent,!1)},e._loopHandler=-1,e._timmers=[],e.elipseTime=0,e}();n.GameAction=c,cc._RF.pop()},{"../Math/Math":"Math","../Network/Msgs":"Msgs","../Network/Network":"Network","../Platform/Functions":"Functions","./GameModel":"GameModel","./GlobalEvent":"GlobalEvent"}],GameModel:[function(e,t,n){"use strict";cc._RF.push(t,"7f13d2iJSxAPaGzsNK4r6j9","GameModel"),Object.defineProperty(n,"__esModule",{value:!0}),n.AudioEffect=n.MouseState=n.GameState=void 0;var o,i,r,a=e("../Math/Math"),u=e("../Platform/Functions"),s=e("../Reactive/SimpleReactive");(function(e){e[e.PRESTART=0]="PRESTART",e[e.CDING=1]="CDING",e[e.HITTING=2]="HITTING",e[e.ENDDING=3]="ENDDING",e[e.SAYING=4]="SAYING"})(o=n.GameState||(n.GameState={})),function(e){e[e.None=0]="None",e[e.DownIng=1]="DownIng",e[e.UpIng=2]="UpIng",e[e.Staying=3]="Staying",e[e.NotHitted=4]="NotHitted",e[e.Hitted=5]="Hitted",e[e.Dead=6]="Dead"}(i=n.MouseState||(n.MouseState={})),function(e){e[e.Error=0]="Error",e[e.Hit=1]="Hit",e[e.Unhit=2]="Unhit",e[e.Light=3]="Light",e[e.NaN=4]="NaN"}(r=n.AudioEffect||(n.AudioEffect={}));var c={level:1,stayingTimer:.5,upTimer:.8,downTimer:.8,sMole:null},l={timeRemain:Number.MAX_VALUE,name:"",misstionAlertTxt:"",hammerType:0,score:0,hittedMouse:0,systemAlertTxt:"",state:o.PRESTART,mouses:{},continuousScore:0,superIng:!1,superScore:6,holeNum:9,lastTriggerMouse:-1,appearMouse:0,generateInterval:1.3,notifies:[],isLoading:!1,audioEffect:r.NaN,appInfo:null,sGetMissionInfo:null,sGetPlayerInfo:null,sGetCurRank:null,cachedMoleList:[],sGetHisRank:null,curStage:-1,sGetGameDescription:null,misstionCount:0},d={};function f(){for(var e in l)d[e]=l[e]}f();for(var m={selectOneMole:function(){var e=d.cachedMoleList;if(0!=e.length){if(1==e.length){var t=e[0];return d.cachedMoleList=[],t}var n=a.randomRangeInt(0,e.length),o=e[n];return e.splice(n,1),o}d.cachedMoleList=m.deepCopy(d.sGetMissionInfo.resourceList[d.curStage].moleList)},deepCopy:function(e){var t=this;if(Array.isArray(e))return e.map(function(e){return t.deepCopy(e)});var n={};for(var o in e)"object"==typeof e[o]&&null!==e[o]?n[o]=this.deepCopy(e[o]):n[o]=e[o];return n}},p=1;p<=d.holeNum;p++){var h={timerHandlers:[],state:i.None,ai:m.deepCopy(c)};h.ai.level=a.randomRangeInt(1,6),d.mouses[p.toString()]=h}var v={GetCanNextByFinalMisstionNum:function(){return 0==d.appInfo.finalMissionNum||!(d.appInfo.missionNum>=d.appInfo.finalMissionNum)},GetMouse:function(e){return d.mouses[e.toString()]},GetMousesByFilter:function(e){for(var t=[],n=1;n<=d.holeNum;n++){var o=v.GetMouse(n);e(o)&&t.push(o)}return t},CanOverGameByScore:function(){return d.score>=d.sGetMissionInfo.passingScore||d.score<=d.sGetMissionInfo.negativeScore},CannotHitState:function(e){return e==i.Hitted||e==i.Dead||e==i.None},FormatNumber:function(e){return e.toString()}},g=function(e){for(var t=0,n=e.timerHandlers;t<n.length;t++){var o=n[t];u.myClearTimeout(o)}e.timerHandlers=[]},y={SetName:function(e){s.Emit(d,"name",e)},SetState:function(e){s.Emit(d,"state",e)},SetMouseStateByMouse:function(e,t){for(var n in d.mouses)d.mouses[n]==e&&y.SetMouseState(parseInt(n),t)},SetMouseState:function(e,t){var n=d.mouses[e.toString()];n.state!=t&&(t==i.Hitted&&(g(n),n.timerHandlers.push(u.mySetTimeout(function(){y.SetMouseState(e,i.Dead),u.mySetTimeout(function(){y.SetMouseState(e,i.None)},100)},500))),t==i.Dead&&(n.ai.level=a.randomRangeInt(1,6)),n.state==i.None&&t==i.UpIng&&(n.ai.sMole=m.selectOneMole(),d.lastTriggerMouse=e,n.timerHandlers.push(u.mySetTimeout(function(){y.SetMouseState(e,i.Staying)},1e3*n.ai.upTimer)),n.timerHandlers.push(u.mySetTimeout(function(){y.SetMouseState(e,i.DownIng)},1e3*n.ai.upTimer+1e3*n.ai.stayingTimer)),n.timerHandlers.push(u.mySetTimeout(function(){y.SetMouseState(e,i.None)},1e3*n.ai.upTimer+1e3*n.ai.stayingTimer+1e3*n.ai.downTimer))),n.state=t,s.Emit(d.mouses,e.toString(),n))},SetRemain:function(e){s.Emit(d,"timeRemain",e)},SetScoreWithHistory:function(e){var t=e-d.score;d.score=e,d.sGetPlayerInfo.totalScore+=t,s.Emit(d,"score",e),s.Emit(d,"sGetPlayerInfo",d.sGetPlayerInfo)},SetScore:function(e){s.Emit(d,"score",e)},SetContinuousScore:function(e){s.Emit(d,"continuousScore",e)},SetIsSupering:function(e){s.Emit(d,"superIng",e)},SetAppearNumGrow:function(e){e?d.appearMouse=0:d.appearMouse++,s.Emit(d,"appearMouse",d.appearMouse)},ResetModel:function(){f();for(var e=1;e<=d.holeNum;e++){var t=v.GetMouse(e);t.ai.level=a.clamp(t.ai.level+1,1,4)}},SetNotify:function(e){d.notifies.push(e),s.Emit(d,"notifies",d.notifies)},SetLoading:function(e){s.Emit(d,"isLoading",e)},SetAudioEffect:function(e){s.Emit(d,"audioEffect",e)},SetMisstionCount:function(e){s.Emit(d,"misstionCount",e)},SetMissionInfo:function(e){d.superScore=e.hitAllScore,d.curStage=0,d.cachedMoleList=m.deepCopy(e.resourceList[d.curStage].moleList);for(var t=1;t<=d.holeNum;t++){var n=v.GetMouse(t);e.levelInfo.stayingTimer&&(n.ai.downTimer=e.levelInfo.downTimer,n.ai.stayingTimer=e.levelInfo.stayingTimer,n.ai.upTimer=e.levelInfo.upTimer,d.generateInterval=e.levelInfo.generateInterval),s.Emit(d.mouses,t.toString(),n)}s.Emit(d,"sGetMissionInfo",e)},SetPlayerInfo:function(e){s.Emit(d,"sGetPlayerInfo",e)},SetCurRankInfo:function(e){s.Emit(d,"sGetCurRank",e)},SetHisRankInfo:function(e){s.Emit(d,"sGetHisRank",e)},SetCurStage:function(e){s.Emit(d,"curStage",e)},SetUpNewModelList:function(e){var t=m.deepCopy(e);s.Emit(d,"cachedMoleList",t)},SetGameDescription:function(e){s.Emit(d,"sGetGameDescription",e)}};n.default={model:d,getters:v,mutations:y},cc._RF.pop()},{"../Math/Math":"Math","../Platform/Functions":"Functions","../Reactive/SimpleReactive":"SimpleReactive"}],GameObjectPool:[function(e,t,n){"use strict";cc._RF.push(t,"1fb90FPr4FNM7JMEg7cSBo8","GameObjectPool"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameObjectPool=void 0;var o=function(){function e(){}return e.prototype.GameObjectPool=function(){},e.keyMaker=function(e,t){return e+t},e.pushNode=function(e,t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},e.moveNode=function(e,t,n,o){var i=e.get(n);if(i){for(var r=i.length-1;r>=0;r--)if(i[r]==o){var a=o;i.splice(r,1);break}a?this.pushNode(t,n,o):cc.log("move error:can not find node:"+o.name)}else cc.log("move error:can not find key:"+n)},e.PreLoadBundle=function(e){cc.assetManager.loadBundle(e)},e.Spawn=function(e,t,n,o,i){var r=this;void 0===i&&(i=!1);var a=this.keyMaker(e,t),u=this.freePool.get(a);if(u&&u.length>0){var s=u[u.length-1];return this.moveNode(this.freePool,this.usedPool,a,s),n(s)}cc.assetManager.loadBundle(e,function(a,u){if(a)return cc.log(a),void o(a);u.load(t,cc.Prefab,null,function(a,u){if(a)return cc.log(a),void o(a);var s=cc.instantiate(u),c=r.keyMaker(e,t);i?r.pushNode(r.freePool,c,s):r.pushNode(r.usedPool,c,s),n(s)})})},e.SpawnSync=function(e,t){var n=this;return new Promise(function(o,i){n.Spawn(e,t,function(e){o(e)},function(e){i(e)})})},e.Free=function(e,t,n){var o=this.keyMaker(e,t);this.moveNode(this.usedPool,this.freePool,o,n),n.parent=this.root},e.Init=function(e){this.root=new cc.Node,this.root.active=!1,e.addChild(this.root)},e.Preload=function(e,t){var n=this;return new Promise(function(o,i){n.Spawn(e,t,function(e){o(e)},function(e){i(e)},!0)})},e.freePool=new Map,e.usedPool=new Map,e}();n.GameObjectPool=o,cc._RF.pop()},{}],GameViewModel:[function(e,t,n){"use strict";var o;cc._RF.push(t,"1842drc8YxP5Jkb0vJoOYvw","GameViewModel"),Object.defineProperty(n,"__esModule",{value:!0});var i,r=e("../Math/Math"),a=e("../Network/Msgs"),u=e("../Network/Network"),s=e("../Platform/Export"),c=e("../Platform/Functions"),l=e("../Platform/GameObjectPool"),d=e("../Reactive/SimpleReactive"),f=e("./GameAction"),m=e("./GameModel");(function(e){e[e.Result=0]="Result",e[e.HistoryRank=1]="HistoryRank",e[e.CurRank=2]="CurRank"})(i||(i={}));for(var p={showSelect:!1,hammerType:1,resultMode:i.Result,audio:null},h={fun:function(){return m.default.getters.FormatNumber(Math.max(m.default.model.score,0))},key:"score",obj:m.default.model},v={fun:function(){var e,t;return m.default.getters.FormatNumber(Math.max(0,null!==(t=null===(e=m.default.model.sGetPlayerInfo)||void 0===e?void 0:e.totalScore)&&void 0!==t?t:0))},key:"sGetPlayerInfo",obj:m.default.model},g=function(e,t,n){var o=e.getComponent(cc.Sprite);cc.assetManager.loadBundle(t,function(e,t){e?cc.log(e):t.load(n,cc.SpriteFrame,null,function(e,t){e?cc.log(e):o.spriteFrame=t})})},y=((o={})[m.AudioEffect.Error]="error",o[m.AudioEffect.Hit]="hit",o[m.AudioEffect.Unhit]="unhit",o[m.AudioEffect.NaN]="nan",o[m.AudioEffect.Light]="lighting",o),S=function(e,t){var n=e.parent.parent.getComponent(cc.Animation);if(n.stop(),t.state==m.MouseState.UpIng&&cc.tween(e).by(t.ai.upTimer,{y:280}).start(),t.state==m.MouseState.DownIng&&cc.tween(e).by(t.ai.downTimer,{y:-280}).start(),t.state==m.MouseState.Hitted){if(e.stopAllActions(),m.default.model.superIng)return void g(e,"Texture","sd05");if(n.play("xuanyun1",0),!t.ai.sMole)return;var o=r.clamp(t.ai.sMole.moleType,1,6),i=1==t.ai.sMole.tappable?3:2;if(1!=t.ai.sMole.tappable)return void g(e,"Texture","dishu0"+o+"_"+i)}if(t.state==m.MouseState.None){if(e.y=-280,!t.ai.sMole)return;o=r.clamp(t.ai.sMole.moleType,1,6),g(e,"Texture","dishu0"+o+"_1")}},w={fun:function(){return m.default.model.state==m.GameState.PRESTART},key:"state",obj:m.default.model},b={fun:function(){var e,t;return null!==(t=null===(e=m.default.model.sGetGameDescription)||void 0===e?void 0:e.gameDescription)&&void 0!==t?t:""},key:"sGetGameDescription",obj:m.default.model},M={fun:function(){return m.default.model.state==m.GameState.CDING},key:"state",obj:m.default.model},G={fun:function(){var e,t;return"\u7b2c"+(null!==(t=null===(e=m.default.model.appInfo)||void 0===e?void 0:e.missionNum)&&void 0!==t?t:1)+"\u5173"},key:"sGetPlayerInfo",obj:m.default.model},N=[{fun:function(){return m.default.model.state==m.GameState.HITTING&&p.showSelect},key:"showSelect",obj:p},{fun:null,key:"state",obj:m.default.model}],I=[{fun:function(){if(m.default.model.score<=0){var e=m.default.model.score<=0?1:p.hammerType;p.hammerType=1}else e=p.hammerType;return m.default.model.superIng?{bundleName:"Texture",textureName:"chuizi0"+e+"_2"}:{bundleName:"Texture",textureName:"chuizi0"+e+"_1"}},key:"hammerType",obj:p},{fun:null,key:"superIng",obj:m.default.model},{fun:null,key:"score",obj:m.default.model}],_={fun:function(){return{bundleName:"Texture",textureName:"chuizi0"+p.hammerType+"_"+(m.default.model.superIng?2:1)}},key:"superIng",obj:m.default.model},C={fun:function(){return m.default.model.notifies},key:"notifies",obj:m.default.model},R={fun:function(){return m.default.model.state==m.GameState.ENDDING},key:"state",obj:m.default.model},k={fun:function(){return m.default.model.score},key:"score",obj:m.default.model},T={fun:function(){var e,t;return"\u7b2c"+(null!==(t=null===(e=m.default.model.appInfo)||void 0===e?void 0:e.missionNum)&&void 0!==t?t:1)+"\u5173"},key:"sGetPlayerInfo",obj:m.default.model},P={fun:function(){var e,t;return null!==(t=null===(e=m.default.model.sGetCurRank)||void 0===e?void 0:e.playerRanking)&&void 0!==t?t:"1"},key:"sGetCurRank",obj:m.default.model},E={fun:function(){return p.resultMode!=i.Result},key:"resultMode",obj:p},F={fun:function(){return p.resultMode==i.Result},key:"resultMode",obj:p},x={fun:function(){return p.resultMode==i.CurRank?"\u5f53\u5173\u6392\u884c\u699c":"\u5386\u53f2\u6392\u884c\u699c"},key:"resultMode",obj:p},B={fun:function(){return m.default.model.isLoading},key:"isLoading",obj:m.default.model},j={fun:function(){return m.default.model.audioEffect},key:"audioEffect",obj:m.default.model},A=[{fun:function(){var e;return m.default.model.state==m.GameState.SAYING?{url:m.default.model.sGetMissionInfo.resourceList[m.default.model.curStage].audioUrl,callback:function(){f.GameAction.StartHitting()}}:m.default.model.state==m.GameState.PRESTART?{url:null===(e=m.default.model.sGetGameDescription)||void 0===e?void 0:e.audioUrl}:null},key:"state",obj:m.default.model},{fun:null,key:"sGetGameDescription",obj:m.default.model},{fun:null,key:"sGetMissionInfo",obj:m.default.model}],O={fun:function(){var e,t;return{bundleName:"Texture",textureName:"bg0"+r.clamp(null!==(t=null===(e=m.default.model.sGetMissionInfo)||void 0===e?void 0:e.sceneNum)&&void 0!==t?t:1,1,3)+"_2"}},key:"sGetMissionInfo",obj:m.default.model},L=["nan","nv","child"],H={fun:function(){var e,t,n=r.clamp(null!==(t=null===(e=m.default.model.sGetPlayerInfo)||void 0===e?void 0:e.avatar)&&void 0!==t?t:1,1,3);return{bundleName:"Texture",textureName:L[n-1]}},key:"sGetPlayerInfo",obj:m.default.model},V={fun:function(){return m.default.model.state==m.GameState.HITTING},key:"state",obj:m.default.model},U=[{fun:function(){return p.resultMode==i.CurRank?m.default.model.sGetCurRank:p.resultMode==i.HistoryRank?m.default.model.sGetHisRank:null},key:"resultMode",obj:p},{fun:null,key:"sGetCurRank",obj:m.default.model},{fun:null,key:"sGetHisRank",obj:m.default.model}],D=[{fun:function(){return{sGetMissionInfo:m.default.model.sGetMissionInfo,score:m.default.model.score,hammerType:m.default.model.score<=0?1:p.hammerType}},key:"sGetMissionInfo",obj:m.default.model},{fun:null,key:"score",obj:m.default.model},{fun:null,key:"hammerType",obj:p}],W=[{fun:function(){var e,t;return!m.default.getters.GetCanNextByFinalMisstionNum()||(null!==(t=m.default.model.score<(null===(e=m.default.model.sGetMissionInfo)||void 0===e?void 0:e.passingScore))&&void 0!==t?t:0)},key:"score",obj:m.default.model},{fun:null,key:"sGetMissionInfo",obj:m.default.model},{fun:null,key:"appInfo",obj:m.default.model}],z=[{viewName:"Rule_panel",bindFunc:s.ViewBindingsImp.bindShow,state:w},{viewName:"Rule_panel.Name",bindFunc:s.ViewBindingsImp.bindText,state:b},{viewName:"PlayerInfoNew.tishi.cur.num",bindFunc:s.ViewBindingsImp.bindText,state:h},{viewName:"jeisuan.result.his.num",bindFunc:s.ViewBindingsImp.bindText,state:v},{viewName:"CD",bindFunc:s.ViewBindingsImp.bindAnimCom,state:M},{viewName:"Guanqia.num",bindFunc:s.ViewBindingsImp.bindText,state:G},{viewName:"SelectWeapon",bindFunc:s.ViewBindingsImp.bindShow,state:N},{viewName:"Weapon_panel.chuizi02_2",bindFunc:s.ViewBindingsImp.bindSprite,state:I},{viewName:"Weapon_panel.chuizi02_2",bindFunc:s.ViewBindingsImp.bindSprite,state:_},{viewName:"tishi",bindFunc:function(e,t){if(t&&0!=t.length){e.active=!0;var n=t[t.length-1];e.children[0].getComponent(cc.Label).string=n.content;var o=e.getComponent(cc.Animation);if(o.currentClip)return o.getAnimationState("notify").stop?o.play("notify",0):o.play("notify",5/24),void(o.currentClip.speed=1/o.currentClip.duration*n.showSeconds);o.play("notify",0),o.currentClip.speed=1/o.currentClip.duration*n.showSeconds}else e.active=!1},state:C},{viewName:"jeisuan",bindFunc:s.ViewBindingsImp.bindShow,state:R},{viewName:"jeisuan.result.score",bindFunc:s.ViewBindingsImp.bindText,state:k},{viewName:"jeisuan.result.misstion",bindFunc:s.ViewBindingsImp.bindText,state:T},{viewName:"jeisuan.result.rank",bindFunc:s.ViewBindingsImp.bindText,state:P},{viewName:"jeisuan.guanbi",bindFunc:s.ViewBindingsImp.bindShow,state:E},{viewName:"jeisuan.result",bindFunc:s.ViewBindingsImp.bindShow,state:F},{viewName:"jeisuan.rank",bindFunc:s.ViewBindingsImp.bindHide,state:F},{viewName:"jeisuan.rank.misstion",bindFunc:s.ViewBindingsImp.bindText,state:x},{viewName:"loading01",bindFunc:s.ViewBindingsImp.bindShow,state:B},{viewName:"audio.effect",bindFunc:function(e,t){for(var n=y[t],o=0,i=e.children;o<i.length;o++){var r=i[o];if(r.name==n){r.active=!0;var a=r.getComponent(cc.AudioSource);a.play(),a.setCurrentTime(0)}else r.active=!1}},state:j},{viewName:"audio.alert.alert",bindFunc:function(e,t){t&&t.url?cc.assetManager.loadRemote(t.url,function(e,n){e?cc.log(e):(cc.audioEngine.playMusic(n,!1),c.mySetTimeout(function(){var e;null===(e=t.callback)||void 0===e||e.call(t)},1e3*n.duration))}):cc.audioEngine.stopMusic()},state:A},{viewName:"audio.bgm.bgm",bindFunc:function(e,t){var n=e.getComponent(cc.AudioSource);t?n.play():n.stop()},state:V},{viewName:"BG",bindFunc:s.ViewBindingsImp.bindSprite,state:O},{viewName:"PlayerInfoNew.head.nan",bindFunc:s.ViewBindingsImp.bindSprite,state:H},{viewName:"jeisuan.rank",bindFunc:function(e,t){if(t){var n=e.getChildByName("rankContent");if(t.playerRanking<=t.rankingList.length)e.getChildByName("rankItem").active=!1;else{var o=e.getChildByName("rankItem");o.active=!0,o.getChildByName("rank").getComponent(cc.Label).string=t.playerRanking.toString(),o.getChildByName("name").getComponent(cc.Label).string=m.default.model.sGetPlayerInfo.playerName,p.resultMode==i.CurRank?o.getChildByName("score").getComponent(cc.Label).string=m.default.model.score.toString():o.getChildByName("score").getComponent(cc.Label).string=m.default.model.sGetPlayerInfo.totalScore.toString()}for(var r=function(e,n){e.getChildByName("rank").getComponent(cc.Label).string=(n+1).toString(),e.getChildByName("name").getComponent(cc.Label).string=t.rankingList[n].playerName,e.getChildByName("score").getComponent(cc.Label).string=t.rankingList[n].playerScore.toString();var o=e.getChildByName("xingxing");o&&(o.active=n+1==t.playerRanking)},a=(Math.min(t.rankingList.length,10),function(e){var o=n.children[e];if(!t.rankingList[e])return o&&(o.active=!1),"continue";o?(o.active=!0,r(o,e)):l.GameObjectPool.SpawnSync("Prefab","rankItem").then(function(t){n.active=!0,n.addChild(t),r(t,e)})}),u=0;u<10;u++)a(u)}},state:U},{viewName:"WeaponSelect.show",bindFunc:s.ViewBindingsImp.bindSprite,state:I},{viewName:"SelectWeapon.Hor",bindFunc:function(e,t){var n=t.sGetMissionInfo,o=t.hammerType,i=t.score;if(n)for(var r=1;r<=5;r++){var a=e.getChildByName("chuizidi"+r);a.getChildByName("xuanze").active=r==o,o==r||i>=n.weaponList[r-1].unlockScore?(a.children[0].getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(cc.Material.BUILTIN_NAME.SPRITE)),a.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(cc.Material.BUILTIN_NAME.SPRITE))):(a.children[0].getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(cc.Material.BUILTIN_NAME.GRAY_SPRITE)),a.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(cc.Material.BUILTIN_NAME.GRAY_SPRITE)))}},state:D},{viewName:"jeisuan.result.layout.anniu01",bindFunc:s.ViewBindingsImp.bindGray,state:W}],q=[{viewName:"WeaponSelect",bindFunc:function(){m.default.model.state==m.GameState.HITTING&&(p.showSelect=!0,d.Emit(p,"showSelect",!0))},type:"click"},{viewName:"SelectWeapon.Close",bindFunc:function(){p.showSelect=!1,d.Emit(p,"showSelect",!1)},type:"click"},{viewName:"jeisuan.result.layout.anniu01",bindFunc:function(){var e,t;m.default.getters.GetCanNextByFinalMisstionNum()&&null!==(t=m.default.model.score>=(null===(e=m.default.model.sGetMissionInfo)||void 0===e?void 0:e.passingScore))&&void 0!==t&&t&&f.GameAction.Next()},type:"click"},{viewName:"jeisuan.result.layout.anniu02",bindFunc:function(){f.GameAction.Replay()},type:"click"},{viewName:"jeisuan.result.layout.anniu03",bindFunc:function(){p.resultMode=i.CurRank;var e=new a.CGetCurRank;e.missionNum=m.default.model.appInfo.missionNum,e.roomId=m.default.model.appInfo.roomId,e.userId=m.default.model.appInfo.userId,u.Network.Rpc(e).then(function(e){m.default.mutations.SetCurRankInfo(e)}),d.Emit(p,"resultMode",i.CurRank)},type:"click"},{viewName:"jeisuan.result.layout.anniu04",bindFunc:function(){p.resultMode=i.HistoryRank;var e=new a.CGetHistoryRank;e.userId=m.default.model.appInfo.userId,u.Network.Rpc(e).then(function(e){m.default.mutations.SetHisRankInfo(e)}),d.Emit(p,"resultMode",i.HistoryRank)},type:"click"},{viewName:"jeisuan.guanbi",bindFunc:function(){p.resultMode=i.Result,d.Emit(p,"resultMode",i.Result)},type:"click"},{viewName:"Rule_panel.confirm",bindFunc:function(){f.GameAction.Start()},type:"click"}],Y=function(e,t,n,o){f.GameAction.HitMouse(e,t,n,o)},J=function(e){var t="Mouses.Mouse"+e+".Mask.dishu01_1",n={fun:function(){return m.default.getters.GetMouse(e)},key:e.toString(),obj:m.default.model.mouses};z.push({viewName:t,bindFunc:S,state:n});var o={fun:function(){var t,n;return null!==(n=null===(t=m.default.getters.GetMouse(e).ai.sMole)||void 0===t?void 0:t.imgUrl)&&void 0!==n?n:""},key:e.toString(),obj:m.default.model.mouses};z.push({viewName:t+".paizi.sp",bindFunc:s.ViewBindingsImp.bindWWWImg,state:o}),q.push({viewName:t,bindFunc:Y.bind(K,e),type:"mouseClick"})},K=this,X=1;X<=m.default.model.holeNum;X++)J(X);var Z=function(e){m.default.model.score<m.default.model.sGetMissionInfo.weaponList[e-1].unlockScore||(p.hammerType=e,p.showSelect=!1,d.Emit(p,"showSelect",!1),d.Emit(p,"hammerType",e))};for(X=1;X<=5;X++)q.push({viewName:"SelectWeapon.Hor.chuizidi"+X,bindFunc:Z.bind(this,X),type:"click"});n.default={stateBinds:z,actionBinds:q},cc._RF.pop()},{"../Math/Math":"Math","../Network/Msgs":"Msgs","../Network/Network":"Network","../Platform/Export":"Export","../Platform/Functions":"Functions","../Platform/GameObjectPool":"GameObjectPool","../Reactive/SimpleReactive":"SimpleReactive","./GameAction":"GameAction","./GameModel":"GameModel"}],GameView:[function(e,t,n){"use strict";cc._RF.push(t,"57476pZBrRCJJZszjX4JVgl","GameView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Platform/Functions"),i=e("../Platform/GameObjectPool"),r=e("./BaseView"),a=e("./GameAction"),u=e("./GameModel"),s=e("./GameViewModel"),c=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetViewModel=function(){return s.default.stateBinds},t.prototype.GetViewAction=function(){return s.default.actionBinds},t.prototype.sortZIndex=function(){for(var e=0,t=this.node.getChildByName("Mouses").children;e<t.length;e++){var n=t[e];n.zIndex=-n.y}},t.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return e.prototype.start.call(this),this.sortZIndex(),i.GameObjectPool.PreLoadBundle("Prefab"),[2]})})},t.prototype.hanmmerMove=function(e){var t=this.getObjFromMap("Weapon_panel.chuizi02_2"),n=t.parent.convertToNodeSpaceAR(e.getLocation());t.x=n.x+20,t.y=n.y},t.prototype.lighting=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,a,u=this;return __generator(this,function(){for(t=function(e){i.GameObjectPool.SpawnSync("Prefab","Lighting").then(function(t){t.parent=u.getObjFromMap("Effect");var n=u.getObjFromMap("Mouses.Mouse"+e+".Mask.dishu01_1").getBoundingBoxToWorld(),r=t.parent.convertToNodeSpaceAR(n.center);t.x=r.x,t.y=r.y;var a=t.getComponent(cc.Animation);a.stop(),a.play("Lighting",0),o.mySetTimeout(function(){i.GameObjectPool.Free("Prefab","Lighting",t)},1e3*a.currentClip.duration)})},n=0,r=e;n<r.length;n++)a=r[n],t(a);return[2]})})},t.prototype.handmerHit=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,a,u,s;return __generator(this,function(c){switch(c.label){case 0:return[4,i.GameObjectPool.SpawnSync("Prefab","Hit")];case 1:return t=c.sent(),(n=t.getComponent(cc.Animation)).stop(),n.play("Hit",0),r=this.getNode("Weapon_panel.chuizi02_2"),(a=r.getComponent(cc.Animation)).stop(),a.play("chuizi",0),u=this.getNode("Weapon_panel"),t.parent=u,t.zIndex=-1,s=u.convertToNodeSpaceAR(e.getLocation()),t.x=s.x-t.width/2,t.y=s.y-t.height/2,o.mySetTimeout(function(){i.GameObjectPool.Free("Prefab","Hit",t)},1e3*n.currentClip.duration),[2]}})})},t.prototype.onEnable=function(){var t=this;e.prototype.onEnable.call(this),o.mySetTimeout(function(){var e=-100;t.node.on(cc.Node.EventType.TOUCH_END,function(n){u.default.model.state==u.GameState.HITTING&&cc.director.getTotalFrames()-e<=10&&t.handmerHit(n)}),t.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){u.default.model.state==u.GameState.HITTING&&t.hanmmerMove(e)}),t.node.on(cc.Node.EventType.TOUCH_START,function(n){return __awaiter(t,void 0,void 0,function(){var t=this;return __generator(this,function(){return e=cc.director.getTotalFrames(),u.default.model.state==u.GameState.HITTING&&(this.hanmmerMove(n),2==n.eventPhase&&a.GameAction.NotHit(function(e){t.lighting(e)})),[2]})})})})},t.prototype.onDisable=function(){e.prototype.onDisable.call(this)},t.prototype.coinFly=function(e){e.stopAllActions();var t=this.getObjFromMap("PlayerInfoNew.tishi.cur.num").getBoundingBoxToWorld(),n=e.parent.convertToNodeSpaceAR(cc.v2(t.x,t.y));cc.tween(e).to(.15,{scale:1.5}).to(.15,{scale:1}).to(.5,{x:n.x,y:n.y}).call(function(){i.GameObjectPool.Free("Prefab","Coin",e)}).start()},t.prototype.minusScore=function(e){e.stopAllActions(),cc.tween(e).by(.5,{y:50}).call(function(){i.GameObjectPool.Free("Prefab","NegCoin",e)}).start()},t.prototype.BindViewAction=function(){var t=this;e.prototype.BindViewAction.call(this);for(var n=this.GetViewAction(),r=function(e){try{var n=a.getNode(e.viewName);"mouseClick"==e.type&&n.on(cc.Node.EventType.TOUCH_START,function(n){o.mySetTimeout(function(){return __awaiter(t,void 0,void 0,function(){var t=this;return __generator(this,function(){return e.bindFunc(function(){return __awaiter(t,void 0,void 0,function(){var e,t;return __generator(this,function(o){switch(o.label){case 0:return[4,i.GameObjectPool.SpawnSync("Prefab","Coin")];case 1:return(e=o.sent()).parent=this.getObjFromMap("Effect"),t=e.parent.convertToNodeSpaceAR(n.getLocation()),e.x=t.x,e.y=t.y+20,this.coinFly(e),[2]}})})},function(e){return __awaiter(t,void 0,void 0,function(){var t,o;return __generator(this,function(r){switch(r.label){case 0:return[4,i.GameObjectPool.SpawnSync("Prefab","NegCoin")];case 1:return(t=r.sent()).parent=this.getObjFromMap("Effect"),o=t.parent.convertToNodeSpaceAR(n.getLocation()),t.x=o.x,t.y=o.y+20,t.getComponent(cc.Label).string=e,this.minusScore(t),[2]}})})},function(e){t.lighting(e)}),[2]})})},200)})}catch(r){cc.log(r)}},a=this,u=0,s=n;u<s.length;u++)r(s[u])},__decorate([c],t)}(r.default);n.default=l,cc._RF.pop()},{"../Platform/Functions":"Functions","../Platform/GameObjectPool":"GameObjectPool","./BaseView":"BaseView","./GameAction":"GameAction","./GameModel":"GameModel","./GameViewModel":"GameViewModel"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"4b493g1KRNAzqEF+BN3HPMt","Game"),Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;n.Game=function(){},cc._RF.pop()},{}],GlobalEvent:[function(e,t,n){"use strict";cc._RF.push(t,"6fd73d+JXtNOL9TINXtQQRS","GlobalEvent"),Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalEvent=void 0;n.GlobalEvent=function(){},cc._RF.pop()},{}],Global:[function(e,t,n){"use strict";var o,i;cc._RF.push(t,"b8652Gv3phFdrGh3u8EMzY4","Global"),Object.defineProperty(n,"__esModule",{value:!0}),n.G_PlayMode=n.G_GameEngine=n.PlayMode=n.GameEngine=void 0,function(e){e[e.CoCos=0]="CoCos",e[e.Unity=1]="Unity"}(o=n.GameEngine||(n.GameEngine={})),function(e){e[e.Debug=0]="Debug",e[e.Release=1]="Release"}(i=n.PlayMode||(n.PlayMode={})),n.G_GameEngine=o.CoCos,n.G_PlayMode=i.Debug,cc._RF.pop()},{}],INetwork:[function(e,t,n){"use strict";cc._RF.push(t,"278f37OHnlBy77jOUQGCXlR","INetwork"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IViewBindings:[function(e,t){"use strict";cc._RF.push(t,"2d52bunSY5Cv737YEsE2If6","IViewBindings"),cc._RF.pop()},{}],Main:[function(e,t,n){"use strict";cc._RF.push(t,"c59ebdijSlDg6QTst0KGXaC","Main");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.Main=void 0;var a=e("./Game/GameAction"),u=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){a.GameAction.Start()},r([u],t)}(cc.Component);n.Main=s,cc._RF.pop()},{"./Game/GameAction":"GameAction"}],Math:[function(e,t,n){"use strict";cc._RF.push(t,"cd8c8V81fFKyI1MB+m+hdy1","Math"),Object.defineProperty(n,"__esModule",{value:!0}),n.clamp=n.randomRangeInt=void 0,n.randomRangeInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)},n.clamp=function(e,t,n){return e>=t&&e<=n?e:e<t?t:e>n?n:void 0},cc._RF.pop()},{}],Msgs:[function(e,t,n){"use strict";cc._RF.push(t,"5eca8rgkI5CKItbxBPxWfFI","Msgs"),Object.defineProperty(n,"__esModule",{value:!0}),n.CGetGameDescription=n.SGameOver=n.SGetHistoryRank=n.CGetHistoryRank=n.SGetCurRank=n.CGetCurRank=n.SPushMessage=n.CPlayerScoreChange=n.SGameState=n.CMisstionStart=n.CMisstionComplete=n.SGetPlayerInfo=n.CGetPlayerInfo=n.SGetMissionInfo=n.CGetMissionInfo=n.SGetGameParam=n.CGetGameParam=n.HttpRes=n.HttpMsg=n.WebSocketMsg=void 0;var o=function(){};n.WebSocketMsg=o;var i=function(){};n.HttpMsg=i;var r=function(){};n.HttpRes=r;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="getGameParam",t}return __extends(t,e),t}(i);n.CGetGameParam=a;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r);n.SGetGameParam=u;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="getMissionInfo",t}return __extends(t,e),t}(i);n.CGetMissionInfo=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i);n.SGetMissionInfo=c;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="getPlayerInfo",t}return __extends(t,e),t}(i);n.CGetPlayerInfo=l;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i);n.SGetPlayerInfo=d;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="finishMission",t}return __extends(t,e),t}(i);n.CMisstionComplete=f;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="startMission",t}return __extends(t,e),t}(i);n.CMisstionStart=m,function(e){e[e.ENDING=0]="ENDING",e[e.ING=1]="ING"}(n.SGameState||(n.SGameState={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="updateGameStatus",t}return __extends(t,e),t}(i);n.CPlayerScoreChange=p;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SPushMessage",t}return __extends(t,e),t}(o);n.SPushMessage=h;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="getMissionRank",t}return __extends(t,e),t}(i);n.CGetCurRank=v;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i);n.SGetCurRank=g;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="getHistoryRank",t}return __extends(t,e),t}(i);n.CGetHistoryRank=y;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i);n.SGetHistoryRank=S;var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SGameOver",t}return __extends(t,e),t}(o);n.SGameOver=w;var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="getGameDescription",t}return __extends(t,e),t}(i);n.CGetGameDescription=b,cc._RF.pop()},{}],NetWorkImp:[function(e,t,n){"use strict";cc._RF.push(t,"f14f5wxh+dCx6a6lQY09mDR","NetWorkImp"),Object.defineProperty(n,"__esModule",{value:!0}),n.MyWebSocket=n.MyHttp=void 0;var o=e("axios"),i=e("../Platform/Functions"),r=function(){function e(){}return e.Ins=function(){return e._ins||(e._ins=new e),e._ins},e.prototype.Send=function(t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){switch(i.label){case 0:return n=e.httpUrl+t.url,t.url=null,[4,o.default.post(n,t)];case 1:return[2,i.sent().data.data]}})})},e.prototype.OnRecv=function(){},e._ins=null,e.httpUrl="http://8.131.82.17:8089/mole/api/",e}();n.MyHttp=r;var a=function(){function e(){var t=this;this.hearbeatInterval=-1,this.ws=null,this.heartBeat=null,this.onrev=null,this.heartInterval=5,this.ws=new WebSocket(e.uri+e.uid);var n=this.ws;n.onopen=function(){cc.log("ws opend on "+(e.uri+e.uid)),t.hearbeatInterval=i.mySetInterval(function(){var e;null===(e=t.heartBeat)||void 0===e||e.call(t,t)},1e3*t.heartInterval)},n.onmessage=function(e){var n;0!=e.data.msgType&&(null===(n=t.onrev)||void 0===n||n.call(t,e.data))},n.onclose=function(){cc.log("ws closed on "+(e.uri+e.uid)),t.stopHeartBeat(),i.mySetTimeout(function(){e._ins=new e,e._ins.SetHearBeat(t.heartBeat),e._ins.SetOnRecv(t.onrev)},2e3)}}return e.prototype.stopHeartBeat=function(){i.myClearTimeout(this.hearbeatInterval)},e.SetUid=function(e){this.uid=e},e.Ins=function(){if(!e._ins){if(!e.uid)throw new Error("must set uid");e._ins=new e}return e._ins},e.prototype.Send=function(e){if("string"!=typeof e)throw new Error("send type must be string");this.ws.send(e)},e.prototype.SetHearBeat=function(e){this.heartBeat=e},e.prototype.SetOnRecv=function(e){this.onrev=e},e.uid="",e.uri="ws://8.131.82.17:999/game/mole?userId=",e._ins=null,e}();n.MyWebSocket=a,cc._RF.pop()},{"../Platform/Functions":"Functions",axios:2}],NetworkFactory:[function(e,t,n){"use strict";cc._RF.push(t,"e4af1fi+9VOpLRM8LjThRJj","NetworkFactory"),Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkFactory=void 0;var o=e("./NetWorkImp"),i=function(){function e(){}return e.GetHttp=function(){return o.MyHttp.Ins()},e.GetWebSocket=function(e){return o.MyWebSocket.SetUid(e),o.MyWebSocket.Ins()},e}();n.NetworkFactory=i,cc._RF.pop()},{"./NetWorkImp":"NetWorkImp"}],Network:[function(e,t,n){"use strict";cc._RF.push(t,"b5225SvQQNAuYfZV0WQVNKe","Network"),Object.defineProperty(n,"__esModule",{value:!0}),n.Network=void 0;var o=e("../Game/GameModel"),i=e("../Platform/Functions"),r=e("./Msgs"),a=e("./NetworkFactory"),u=0,s=function(){this.msgType=0,this.msg="ping",this.uniId=u++},c=function(){function e(){}return e.Send=function(){},e.AddNotify=function(e,t){this.notifyListeners.set(e.name,t)},e.Rpc=function(e,t){return void 0===t&&(t=!1),__awaiter(this,void 0,Promise,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return this.needResponseCount++,t=!1,i.mySetTimeout(function(){t||o.default.mutations.SetLoading(!0)},200),[4,a.NetworkFactory.GetHttp().Send(e)];case 1:return n=r.sent(),t=!0,this.needResponseCount--,this.needResponseCount<=0&&o.default.mutations.SetLoading(!1),[2,n]}})})},e.RpcSendOnly=function(e){a.NetworkFactory.GetHttp().Send(e)},e.WebSocketConect=function(e){var t=a.NetworkFactory.GetWebSocket(e);t.SetHearBeat(function(e){var t=new s;e.Send(JSON.stringify(t))});var n=this;t.SetOnRecv(function(e){var t=JSON.parse(e);if(1==t.msgType){var o=n.notifyListeners.get("SPushMessage");(i=new r.SPushMessage).content=t.msg,i.showSeconds=t.showSeconds,null==o||o(i)}if(88==t.msgType){o=n.notifyListeners.get("SGameOver");var i=new r.SGameOver;null==o||o(i)}})},e.notifyListeners=new Map,e.needResponseCount=0,e}();n.Network=c,cc._RF.pop()},{"../Game/GameModel":"GameModel","../Platform/Functions":"Functions","./Msgs":"Msgs","./NetworkFactory":"NetworkFactory"}],SelectViewModel:[function(e,t,n){"use strict";cc._RF.push(t,"1b517hiEPVKR4zMpP+zyhi9","SelectViewModel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Platform/Export"),i=e("../Reactive/SimpleReactive"),r=e("./GameAction"),a=e("./GameModel"),u={curPage:1};function s(e,t,n){var o=e.getComponent(cc.Sprite);cc.assetManager.loadBundle(t,function(e,t){e?cc.log(e):t.load(n,cc.SpriteFrame,null,function(e,t){e?cc.log(e):o.spriteFrame=t})})}function c(e,t){if(t){e.active=!0,e.getChildByName("ditu01").active=t.canSelect,e.getChildByName("ditu02").active=!t.canSelect;var n=e.getChildByName("layout").getChildByName("gewei"),o=e.getChildByName("layout").getChildByName("shiwei");t.num>=10?(o.active=!0,n.active=!0,s(n,"Texture","selectMisstion/s"+t.num%10),s(o,"Texture","selectMisstion/s"+Math.floor(t.num/10))):(o.active=!1,n.active=!0,s(n,"Texture","selectMisstion/s"+t.num)),e.off(cc.Node.EventType.TOUCH_START,i),e.on(cc.Node.EventType.TOUCH_START,i)}else e.active=!1;function i(){r.GameAction.SelectMisstion(t.num)}}var l=[{fun:function(){for(var e=a.default.model.misstionCount,t=[],n=Math.min(e,99)-1,o=Math.floor(n/24)+1,i=n%24,r=24*(u.curPage-1),s=u.curPage==o?i:24;s>=0;){var c={canSelect:!0,num:r+1};t.push(c),s--,r++}return t},key:"misstionCount",obj:a.default.model},{fun:null,key:"curPage",obj:u}],d=[{fun:function(){return!(a.default.model.misstionCount<24)&&u.curPage>=2},key:"curPage",obj:u},{fun:null,key:"misstionCount",obj:a.default.model}],f=[{fun:function(){var e=a.default.model.misstionCount;return!(e<24)&&u.curPage<Math.ceil(e/24)},key:"curPage",obj:u},{fun:null,key:"misstionCount",obj:a.default.model}],m=[{viewName:"layout",bindFunc:function(e,t){var n=this;e.children.forEach(function(e,o){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(){return c(e,t[o]),[2]})})})},state:l},{viewName:"left",bindFunc:o.ViewBindingsImp.bindShow,state:d},{viewName:"right",bindFunc:o.ViewBindingsImp.bindShow,state:f}],p=[{bindFunc:function(){u.curPage++,i.Emit(u,"curPage",u.curPage)},type:"click",viewName:"right"},{bindFunc:function(){u.curPage--,i.Emit(u,"curPage",u.curPage)},type:"click",viewName:"left"}];n.default={stateBinds:m,actionBinds:p},cc._RF.pop()},{"../Platform/Export":"Export","../Reactive/SimpleReactive":"SimpleReactive","./GameAction":"GameAction","./GameModel":"GameModel"}],SelectView:[function(e,t,n){"use strict";cc._RF.push(t,"7a866inzRFGELIRxwkcdepf","SelectView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseView"),i=e("./SelectViewModel"),r=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetViewModel=function(){return i.default.stateBinds},t.prototype.GetViewAction=function(){return i.default.actionBinds},__decorate([r],t)}(o.default);n.default=a,cc._RF.pop()},{"./BaseView":"BaseView","./SelectViewModel":"SelectViewModel"}],SimpleReactive:[function(e,t,n){"use strict";cc._RF.push(t,"62bbdMQ5rdO0pabxMCwyh/I","SimpleReactive"),Object.defineProperty(n,"__esModule",{value:!0}),n.Clear=n.On=n.Emit=void 0;var o=new Map;n.Emit=function(e,t,n){var i;e[t]=n;var r=null===(i=o.get(e))||void 0===i?void 0:i.get(t);if(r)for(var a=0,u=r;a<u.length;a++){var s=u[a];try{s()}catch(c){cc.log(c)}}},n.On=function(e,t,n){var i=o.get(e);if(i){var r=i.get(t);r?r.push(n):i.set(t,[n])}else{var a=new Map([[t,[n]]]);o.set(e,a)}},n.Clear=function(e){o.delete(e)},cc._RF.pop()},{}],StartUp:[function(e,t,n){"use strict";cc._RF.push(t,"a60a99LdLtPULxdBGdU51Xt","StartUp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Network/Msgs"),i=e("../Network/Network"),r=e("../Platform/Functions"),a=e("./GameAction"),u=e("./GameModel"),s=e("./GameView"),c=e("./GlobalEvent"),l=cc._decorator.ccclass,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r=this;return __generator(this,function(s){switch(s.label){case 0:return(e=GameApp.startGame())||(e={autoStart:1,missionNum:2,finalMissionNum:5,roomId:1,userId:"12345"}),u.default.model.appInfo=e,i.Network.WebSocketConect(u.default.model.appInfo.userId),i.Network.AddNotify(new o.SPushMessage,function(e){u.default.mutations.SetNotify(e)}),i.Network.AddNotify(new o.SGameOver,function(){a.GameAction.EndGame()}),(t=new o.CGetGameParam).userId=u.default.model.appInfo.userId,[4,i.Network.Rpc(t)];case 1:return n=s.sent(),u.default.mutations.SetMisstionCount(n.missionCount),a.GameAction.GetMisstionInfo(e.missionNum),a.GameAction.GetPlayerInfo(),a.GameAction.GetGameDescription(),this.SetGameing(1==e.autoStart),this.SetSelect(0==e.autoStart),c.GlobalEvent.SetGameing=function(e){r.SetGameing(e)},c.GlobalEvent.SetSelect=function(e){r.SetSelect(e)},[2]}})})},t.prototype.SetGameing=function(e){var t=this.node.getParent().getChildByName("Game");t.active=e,t.getComponent(s.default).enabled=e},t.prototype.onDisable=function(){c.GlobalEvent.SetGameing=void 0,c.GlobalEvent.SetSelect=void 0},t.prototype.SetSelect=function(e){this.node.getParent().getChildByName("SelectMisstion").active=e},t.prototype.update=function(e){r.myUpdate(e)},__decorate([l],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Network/Msgs":"Msgs","../Network/Network":"Network","../Platform/Functions":"Functions","./GameAction":"GameAction","./GameModel":"GameModel","./GameView":"GameView","./GlobalEvent":"GlobalEvent"}],UnityViewBindings:[function(e,t,n){"use strict";cc._RF.push(t,"53452NMU+tKvq7cMDzYNWMz","UnityViewBindings"),Object.defineProperty(n,"__esModule",{value:!0}),n.UnityViewBindings=void 0;var o=function(){function e(){}return e.prototype.bindGray=function(){throw new Error("Method not implemented.")},e.prototype.bindWWWImg=function(){throw new Error("Method not implemented.")},e.prototype.bindHide=function(){throw new Error("Method not implemented.")},e.prototype.bindAnimCom=function(){throw new Error("Method not implemented.")},e.prototype.bindSprite=function(){throw new Error("Method not implemented.")},e.prototype.bindTween=function(){throw new Error("Method not implemented.")},e.prototype.bindAnimStop=function(){throw new Error("Method not implemented.")},e.prototype.bindText=function(){throw new Error("Method not implemented.")},e.prototype.bindShow=function(){throw new Error("Method not implemented.")},e.prototype.bindProgress=function(){throw new Error("Method not implemented.")},e}();n.UnityViewBindings=o,cc._RF.pop()},{}]},{},["BaseView","BindInfo","Game","GameAction","GameModel","GameView","GameViewModel","GlobalEvent","SelectView","SelectViewModel","StartUp","Global","Main","Math","INetwork","Msgs","NetWorkImp","Network","NetworkFactory","CocosViewBindings","Export","Functions","GameObjectPool","IViewBindings","UnityViewBindings","SimpleReactive"]);